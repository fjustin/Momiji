!function(){function r(r){return r.replace(/<[^>]*>?/gi,t)}function t(r){return r.match(o)||r.match(s)||r.match(a)||r.match(c)?r:""}function e(r){if(""==r)return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,e=r.toLowerCase().match(t),n=(e||[]).length;if(0==n)return r;for(var i,o,s,a="<p><img><br><li><hr>",c=[],h=[],u=!1,f=0;f<n;f++)if(i=e[f].replace(/<\/?(\w+).*/,"$1"),!(c[f]||a.search("<"+i+">")>-1)){if(o=e[f],s=-1,!/^<\//.test(o))for(var p=f+1;p<n;p++)if(!c[p]&&e[p]=="</"+i+">"){s=p;break}-1==s?u=h[f]=!0:c[s]=!0}if(!u)return r;var f=0;return r=r.replace(t,function(r){var t=h[f]?"":r;return f++,t})}var n,i;"object"==typeof exports&&"function"==typeof require?(n=exports,i=require("./Markdown.Converter").Converter):(n=window.Markdown,i=n.Converter),n.getSanitizingConverter=function(){var t=new i;return t.hooks.chain("postConversion",r),t.hooks.chain("postConversion",e),t};var o=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="(https?:(\/\/|\/)|ftp:(\/\/|\/)|mailto:|magnet:)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,a=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i,c=/^(<pre(\sclass="prettyprint linenums")?>|<\/pre>)$/i}();